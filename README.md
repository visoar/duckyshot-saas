### `README.md`

# UllrAI SaaS Starter Kit

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/ullrai/saas-starter)

è¿™æ˜¯ä¸€ä¸ªå…è´¹ã€å¼€æºã€ç”Ÿäº§å°±ç»ªçš„å…¨æ ˆ SaaS å…¥é—¨å¥—ä»¶ï¼Œæ—¨åœ¨å¸®åŠ©æ‚¨ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å¯åŠ¨ä¸‹ä¸€ä¸ªé¡¹ç›®ã€‚å®ƒé›†æˆäº†ç°ä»£ Web å¼€å‘ä¸­å¤‡å—æ¨å´‡çš„å·¥å…·å’Œå®è·µï¼Œä¸ºæ‚¨æä¾›äº†ä¸€ä¸ªåšå®çš„åŸºç¡€ã€‚

![UllrAI SaaS Starter Kit](./public/og.png)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

æœ¬å…¥é—¨å¥—ä»¶æä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¯å¸®åŠ©æ‚¨å¿«é€Ÿæ„å»ºåŠŸèƒ½é½å…¨çš„ SaaS åº”ç”¨ï¼š

- **èº«ä»½éªŒè¯ (Better-Auth + Resend):** é›†æˆäº† [Better-Auth](https://better-auth.com/)ï¼Œæä¾›å®‰å…¨çš„é­”æœ¯é“¾æ¥ç™»å½•å’Œç¬¬ä¸‰æ–¹ OAuth åŠŸèƒ½ã€‚ä½¿ç”¨ [Resend](https://resend.com/) æä¾›å¯é çš„é‚®ä»¶å‘é€æœåŠ¡ï¼Œå¹¶é›†æˆ Mailchecker é¿å…ä¸´æ—¶é‚®ç®±ã€‚
- **ç°ä»£ Web æ¡†æ¶ (Next.js 15 + TypeScript):** åŸºäºæœ€æ–°çš„ [Next.js 15](https://nextjs.org/)ï¼Œä½¿ç”¨ App Router å’ŒæœåŠ¡å™¨ç»„ä»¶ã€‚æ•´ä¸ªé¡¹ç›®é‡‡ç”¨ä¸¥æ ¼çš„ TypeScript ç±»å‹æ£€æŸ¥ã€‚
- **æ•°æ®åº“ä¸ ORM (Drizzle + PostgreSQL):** ä½¿ç”¨ [Drizzle ORM](https://orm.drizzle.team/) è¿›è¡Œç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œï¼Œå¹¶ä¸ PostgreSQL æ·±åº¦é›†æˆã€‚æ”¯æŒæ¨¡å¼è¿ç§»å’Œä¼˜åŒ–çš„æŸ¥è¯¢ã€‚
- **æ”¯ä»˜ä¸è®¢é˜… (Creem):** é›†æˆäº† [Creem](https://creem.io/) ä½œä¸ºæ”¯ä»˜æä¾›å•†ï¼Œè½»æ¾å¤„ç†è®¢é˜…å’Œä¸€æ¬¡æ€§æ”¯ä»˜ã€‚
- **UI ç»„ä»¶åº“ (shadcn/ui + Tailwind CSS):** ä½¿ç”¨ [shadcn/ui](https://ui.shadcn.com/) æ„å»ºï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäº Radix UI å’Œ Tailwind CSS çš„å¯è®¿é—®ã€å¯ç»„åˆçš„ç»„ä»¶åº“ï¼Œå†…ç½®ä¸»é¢˜æ”¯æŒã€‚
- **è¡¨å•å¤„ç† (Zod + React Hook Form):** é€šè¿‡ [Zod](https://zod.dev/) å’Œ [React Hook Form](https://react-hook-form.com/) å®ç°å¼ºå¤§çš„ã€ç±»å‹å®‰å…¨çš„è¡¨å•éªŒè¯ã€‚
- **æ–‡ä»¶ä¸Šä¼  (Cloudflare R2):** åŸºäº Cloudflare R2 çš„å®‰å…¨æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿï¼Œæ”¯æŒå®¢æˆ·ç«¯ç›´ä¼ å’Œå¤šç§æ–‡ä»¶ç±»å‹ä¸å¤§å°é™åˆ¶ã€‚
- **åšå®¢ç³»ç»Ÿ (Keystatic):** é›†æˆ [Keystatic](https://keystatic.com/) ä½œä¸º CMSï¼Œæä¾› Markdown/MDX å†…å®¹ç®¡ç†èƒ½åŠ›ï¼Œæ–¹ä¾¿åˆ›å»ºå’Œç®¡ç†åšå®¢æ–‡ç« ã€‚
- **ä»£ç è´¨é‡:** å†…ç½® ESLint å’Œ Prettierï¼Œç¡®ä¿ä»£ç é£æ ¼ç»Ÿä¸€å’Œè´¨é‡ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| åˆ†ç±»       | æŠ€æœ¯                                                                                                                                                  |
| :--------- | :---------------------------------------------------------------------------------------------------------------------------------------------------- |
| **æ¡†æ¶**   | [Next.js](https://nextjs.org/) 15                                                                                                                     |
| **è¯­è¨€**   | [TypeScript](https://www.typescriptlang.org/)                                                                                                         |
| **UI**     | [React](https://react.dev/), [shadcn/ui](https://ui.shadcn.com/), [Tailwind v4](https://tailwindcss.com/), [Lucide React](https://lucide.dev/) (å›¾æ ‡) |
| **è®¤è¯**   | [Better-Auth](https://better-auth.com/)                                                                                                               |
| **æ•°æ®åº“** | [PostgreSQL](https://www.postgresql.org/)                                                                                                             |
| **ORM**    | [Drizzle ORM](https://orm.drizzle.team/)                                                                                                              |
| **æ”¯ä»˜**   | [Creem](https://creem.io/)                                                                                                                            |
| **é‚®ä»¶**   | [Resend](https://resend.com/), [React Email](https://react.email/)                                                                                    |
| **è¡¨å•**   | [React Hook Form](https://react-hook-form.com/), [Zod](https://zod.dev/)                                                                              |
| **éƒ¨ç½²**   | [Vercel](https://vercel.com/)                                                                                                                         |
| **åŒ…ç®¡ç†** | [pnpm](https://pnpm.io/)                                                                                                                              |

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒä¸­å·²å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š

- [Node.js](https://nodejs.org/en/) (æ¨è v20.x æˆ–æ›´é«˜ç‰ˆæœ¬)
- [pnpm](https://pnpm.io/installation)

### 2. é¡¹ç›®å…‹éš†ä¸å®‰è£…

```bash
# å…‹éš†é¡¹ç›®ä»“åº“
git clone https://github.com/ullrai/saas-starter.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd saas-starter

# ä½¿ç”¨ pnpm å®‰è£…ä¾èµ–
pnpm install
```

### 3. ç¯å¢ƒé…ç½®

é¡¹ç›®é€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ã€‚é¦–å…ˆï¼Œå¤åˆ¶ç¤ºä¾‹æ–‡ä»¶ï¼š

```bash
cp .env.example .env
```

ç„¶åï¼Œç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥æ‰€æœ‰å¿…éœ€çš„å€¼ã€‚

#### ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å                   | æè¿°                                            | ç¤ºä¾‹                                                |
| :----------------------- | :---------------------------------------------- | :-------------------------------------------------- |
| `DATABASE_URL`           | **å¿…éœ€ã€‚** PostgreSQL è¿æ¥å­—ç¬¦ä¸²ã€‚              | `postgresql://user:password@localhost:5432/db_name` |
| `NEXT_PUBLIC_APP_URL`    | **å¿…éœ€ã€‚** æ‚¨åº”ç”¨éƒ¨ç½²åçš„å…¬å¼€ URLã€‚             | `http://localhost:3000` æˆ– `https://yourdomain.com` |
| `BETTER_AUTH_SECRET`     | **å¿…éœ€ã€‚** ç”¨äºåŠ å¯†ä¼šè¯çš„å¯†é’¥ï¼Œå¿…é¡»æ˜¯32ä¸ªå­—ç¬¦ã€‚ | `a_very_secure_random_32_char_string`               |
| `RESEND_API_KEY`         | **å¿…éœ€ã€‚** ç”¨äºå‘é€é‚®ä»¶çš„ Resend API Keyã€‚      | `re_xxxxxxxxxxxxxxxx`                               |
| `CREEM_API_KEY`          | **å¿…éœ€ã€‚** Creem çš„ API Keyã€‚                   | `your_creem_api_key`                                |
| `CREEM_ENVIRONMENT`      | **å¿…éœ€ã€‚** Creem ç¯å¢ƒæ¨¡å¼ã€‚                     | `test_mode` æˆ– `live_mode`                          |
| `CREEM_WEBHOOK_SECRET`   | **å¿…éœ€ã€‚** Creem Webhook å¯†é’¥ã€‚                 | `whsec_your_webhook_secret`                         |
| `R2_ENDPOINT`            | **å¿…éœ€ã€‚** Cloudflare R2 API ç«¯ç‚¹ã€‚             | `https://<ACCOUNT_ID>.r2.cloudflarestorage.com`     |
| `R2_ACCESS_KEY_ID`       | **å¿…éœ€ã€‚** R2 è®¿é—®å¯†é’¥ IDã€‚                     | `your_r2_access_key_id`                             |
| `R2_SECRET_ACCESS_KEY`   | **å¿…éœ€ã€‚** R2 ç§˜å¯†è®¿é—®å¯†é’¥ã€‚                    | `your_r2_secret_access_key`                         |
| `R2_BUCKET_NAME`         | **å¿…éœ€ã€‚** R2 å­˜å‚¨æ¡¶åç§°ã€‚                      | `your_r2_bucket_name`                               |
| `R2_PUBLIC_URL`          | **å¿…éœ€ã€‚** R2 å­˜å‚¨æ¡¶çš„å…¬å…±è®¿é—® URLã€‚            | `https://your-bucket.your-account.r2.dev`           |
| `GITHUB_CLIENT_ID`       | _å¯é€‰ã€‚_ ç”¨äº GitHub OAuth çš„ Client IDã€‚       | `your_github_client_id`                             |
| `GITHUB_CLIENT_SECRET`   | _å¯é€‰ã€‚_ ç”¨äº GitHub OAuth çš„ Client Secretã€‚   | `your_github_client_secret`                         |
| `GOOGLE_CLIENT_ID`       | _å¯é€‰ã€‚_ ç”¨äº Google OAuth çš„ Client IDã€‚       | `your_google_client_id`                             |
| `GOOGLE_CLIENT_SECRET`   | _å¯é€‰ã€‚_ ç”¨äº Google OAuth çš„ Client Secretã€‚   | `your_google_client_secret`                         |
| `LINKEDIN_CLIENT_ID`     | _å¯é€‰ã€‚_ ç”¨äº LinkedIn OAuth çš„ Client IDã€‚     | `your_linkedin_client_id`                           |
| `LINKEDIN_CLIENT_SECRET` | _å¯é€‰ã€‚_ ç”¨äº LinkedIn OAuth çš„ Client Secretã€‚ | `your_linkedin_client_secret`                       |

> **æç¤º:** æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¸€ä¸ªå®‰å…¨çš„å¯†é’¥ï¼š
> `openssl rand -base64 32`

### 4. æ•°æ®åº“è®¾ç½®

æœ¬é¡¹ç›®ä½¿ç”¨ Drizzle ORM è¿›è¡Œæ•°æ®åº“è¿ç§»ã€‚ä¸ºäº†ç¡®ä¿å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„éš”ç¦»ï¼Œé¡¹ç›®é…ç½®äº†ä¸¤ä¸ªç‹¬ç«‹çš„æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼š

- `database/config.ts` - å¼€å‘ç¯å¢ƒé…ç½®ï¼Œè¿ç§»æ–‡ä»¶è¾“å‡ºåˆ° `database/migrations/development/`
- `database/config.prod.ts` - ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼Œè¿ç§»æ–‡ä»¶è¾“å‡ºåˆ° `database/migrations/production/`

#### å¼€å‘ç¯å¢ƒ

å¯¹äºæœ¬åœ°å¼€å‘ï¼Œæ¨èä½¿ç”¨ `push` å‘½ä»¤ç›´æ¥å°† `schema.ts` çš„å˜æ›´åŒæ­¥åˆ°æ•°æ®åº“ï¼š

```bash
# ç¡®ä¿æœ¬åœ° PostgreSQL æ•°æ®åº“æ­£åœ¨è¿è¡Œ
pnpm db:push
```

æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„è¿ç§»æ–‡ä»¶æ–¹å¼ï¼š

```bash
pnpm db:generate  # åŸºäº schema å˜æ›´ç”Ÿæˆè¿ç§»æ–‡ä»¶
pnpm db:migrate:dev # å°†è¿ç§»æ–‡ä»¶åº”ç”¨åˆ°å¼€å‘æ•°æ®åº“
```

#### ç”Ÿäº§ç¯å¢ƒ

**é‡è¦ï¼š** ç”Ÿäº§ç¯å¢ƒ**å¿…é¡»**ä½¿ç”¨åŸºäº SQL è¿ç§»æ–‡ä»¶çš„æ–¹å¼ï¼Œä»¥ç¡®ä¿æ•°æ®åº“å˜æ›´çš„å¯è¿½æº¯æ€§å’Œå®‰å…¨æ€§ã€‚

```bash
# 1. åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼ŒåŸºäº schema å˜æ›´ç”Ÿæˆè¿ç§»æ–‡ä»¶
pnpm db:generate

# 2. ä¸ºç”Ÿäº§ç¯å¢ƒç”Ÿæˆè¿ç§»æ–‡ä»¶ï¼ˆä½¿ç”¨ç‹¬ç«‹çš„ç”Ÿäº§é…ç½®ï¼‰
pnpm db:generate:prod

# 3. å°†ä»£ç ï¼ˆåŒ…å«æ–°ç”Ÿæˆçš„è¿ç§»æ–‡ä»¶ï¼‰éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

# 4. åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼ˆé€šå¸¸é€šè¿‡ CI/CD æµç¨‹ï¼‰ï¼Œåº”ç”¨è¿ç§»
pnpm db:migrate:prod
```

> **å®‰å…¨æç¤ºï¼š**
>
> - **åˆ‡å‹¿**åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ `pnpm db:push`ã€‚
> - ç”Ÿäº§ç¯å¢ƒè¿ç§»åº”é€šè¿‡ CI/CD æµç¨‹è‡ªåŠ¨åŒ–æ‰§è¡Œã€‚
> - åœ¨åº”ç”¨è¿ç§»å‰ï¼ŒåŠ¡å¿…å¤‡ä»½ç”Ÿäº§æ•°æ®åº“ã€‚

### 5. å†…å®¹ç®¡ç† (Keystatic)

é¡¹ç›®ä½¿ç”¨ Keystatic ä½œä¸ºå†…å®¹ç®¡ç†ç³»ç»Ÿ (CMS)ï¼Œç”¨äºç®¡ç†åšå®¢æ–‡ç« ç­‰å†…å®¹ã€‚

- **è®¿é—®æ–¹å¼:** åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¿é—® `/keystatic` è·¯å¾„æ¥è¿›å…¥ Keystatic çš„ç®¡ç†ç•Œé¢ã€‚
- **ç”Ÿäº§ç¯å¢ƒé™åˆ¶:** ä¸ºäº†å®‰å…¨èµ·è§ï¼ŒKeystatic çš„ç®¡ç†ç•Œé¢å’Œç›¸å…³ API åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é»˜è®¤æ˜¯ç¦ç”¨çš„ã€‚è¿™æ„å‘³ç€åœ¨éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨åï¼Œæ— æ³•é€šè¿‡ `/keystatic` è·¯å¾„è®¿é—®ç®¡ç†åå°ã€‚

### 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

ç°åœ¨ï¼Œæ‚¨çš„åº”ç”¨åº”è¯¥å·²ç»åœ¨ [http://localhost:3000](http://localhost:3000) ä¸Šè¿è¡Œäº†ï¼

### 6. ç®¡ç†å‘˜è´¦æˆ·è®¾ç½®

ä¸ºäº†å®‰å…¨èµ·è§ï¼Œç³»ç»Ÿä¸å†è‡ªåŠ¨å°†ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·è®¾ç½®ä¸ºè¶…çº§ç®¡ç†å‘˜ã€‚æ‚¨éœ€è¦é€šè¿‡ä¸€ä¸ªå®‰å…¨è„šæœ¬æ¥æ‰‹åŠ¨æŒ‡å®šè¶…çº§ç®¡ç†å‘˜ã€‚

**è®¾ç½®æµç¨‹ï¼š**

1.  é¦–å…ˆï¼Œç¡®ä¿æ‚¨æƒ³è¦æå‡ä¸ºç®¡ç†å‘˜çš„ç”¨æˆ·å·²ç»é€šè¿‡å¸¸è§„æ–¹å¼åœ¨ç³»ç»Ÿä¸­æ³¨å†Œäº†ä¸€ä¸ªè´¦æˆ·ã€‚
2.  åœ¨æ‚¨çš„æœåŠ¡å™¨ï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡ï¼‰æˆ–æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­ï¼ˆä½¿ç”¨.envæ–‡ä»¶ä½œä¸ºç¯å¢ƒå˜é‡ï¼‰ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚
    æœåŠ¡å™¨ç¯å¢ƒä¸­å¯ç”¨ï¼š

    ```bash
    pnpm set:admin:prod --email=your-email@example.com
    ```

    æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­å¯ç”¨ï¼š

    ```bash
    pnpm set:admin --email=your-email@example.com
    ```

    å°† `your-email@example.com` æ›¿æ¢ä¸ºæ‚¨è¦æå‡çš„ç”¨æˆ·çš„æ³¨å†Œé‚®ç®±ã€‚

3.  è„šæœ¬æ‰§è¡ŒæˆåŠŸåï¼Œè¯¥ç”¨æˆ·å°†æ‹¥æœ‰è¶…çº§ç®¡ç†å‘˜ (`super_admin`) æƒé™ï¼Œå¯ä»¥è®¿é—® `/dashboard/admin` è·¯å¾„ä¸‹çš„æ‰€æœ‰ç®¡ç†åŠŸèƒ½ã€‚

**å®‰å…¨æç¤ºï¼š**

- è¯·ç¡®ä¿åªå°†æ­¤æƒé™æˆäºˆå—ä¿¡ä»»çš„ç”¨æˆ·ã€‚
- æ­¤å‘½ä»¤åº”åœ¨å®‰å…¨çš„ç¯å¢ƒä¸­æ‰§è¡Œï¼Œé¿å…æš´éœ²æ•æ„Ÿä¿¡æ¯ã€‚

## ğŸ“œ å¯ç”¨è„šæœ¬

#### åº”ç”¨è„šæœ¬

| è„šæœ¬                   | æè¿°                               |
| :--------------------- | :--------------------------------- |
| `pnpm dev`             | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚                   |
| `pnpm build`           | ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»ºåº”ç”¨ã€‚               |
| `pnpm start`           | å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨ã€‚                   |
| `pnpm lint`            | æ£€æŸ¥ä»£ç ä¸­çš„ linting é”™è¯¯ã€‚        |
| `pnpm test`            | è¿è¡Œå•å…ƒæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Šã€‚     |
| `pnpm prettier:format` | ä½¿ç”¨ Prettier æ ¼å¼åŒ–æ‰€æœ‰ä»£ç ã€‚     |
| `pnpm set:admin`       | å°†æŒ‡å®šé‚®ç®±çš„ç”¨æˆ·æå‡ä¸ºè¶…çº§ç®¡ç†å‘˜ã€‚ |

#### åŒ…ä½“ç§¯åˆ†æè„šæœ¬

| è„šæœ¬               | æè¿°                           |
| :----------------- | :----------------------------- |
| `pnpm analyze`     | æ„å»ºåº”ç”¨å¹¶ç”ŸæˆåŒ…ä½“ç§¯åˆ†ææŠ¥å‘Šã€‚ |
| `pnpm analyze:dev` | åœ¨å¼€å‘æ¨¡å¼ä¸‹å¯ç”¨åŒ…ä½“ç§¯åˆ†æã€‚   |

#### æ•°æ®åº“è„šæœ¬

| è„šæœ¬                    | æè¿°                                        | ç¯å¢ƒ |
| :---------------------- | :------------------------------------------ | :--- |
| `pnpm db:generate`      | åŸºäºæ¨¡å¼å˜æ›´ç”Ÿæˆ SQL è¿ç§»æ–‡ä»¶ã€‚             | å¼€å‘ |
| `pnpm db:generate:prod` | ä¸ºç”Ÿäº§ç¯å¢ƒç”Ÿæˆ SQL è¿ç§»æ–‡ä»¶ã€‚               | ç”Ÿäº§ |
| `pnpm db:push`          | **ä»…ç”¨äºå¼€å‘ã€‚** ç›´æ¥æ¨é€æ¨¡å¼å˜æ›´åˆ°æ•°æ®åº“ã€‚ | å¼€å‘ |
| `pnpm db:migrate:dev`   | å°†è¿ç§»æ–‡ä»¶åº”ç”¨åˆ°å¼€å‘æ•°æ®åº“ã€‚                | å¼€å‘ |
| `pnpm db:migrate:prod`  | **ç”¨äºç”Ÿäº§ã€‚** å°†è¿ç§»æ–‡ä»¶åº”ç”¨åˆ°ç”Ÿäº§æ•°æ®åº“ã€‚ | ç”Ÿäº§ |

## ğŸ“ æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½

æœ¬é¡¹ç›®é›†æˆäº†åŸºäº Cloudflare R2 çš„å®‰å…¨æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿã€‚

### 1. Cloudflare R2 é…ç½®

1.  **åˆ›å»º R2 å­˜å‚¨æ¡¶**ï¼šç™»å½• Cloudflare Dashboardï¼Œå¯¼èˆªåˆ° R2 å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å­˜å‚¨æ¡¶ã€‚
2.  **è·å– API ä»¤ç‰Œ**ï¼šåœ¨ R2 æ¦‚è§ˆé¡µé¢ï¼Œç‚¹å‡» "Manage R2 API Tokens"ï¼Œåˆ›å»ºä¸€ä¸ªå…·æœ‰â€œå¯¹è±¡è¯»å†™â€æƒé™çš„ä»¤ç‰Œã€‚è®°ä¸‹ `Access Key ID` å’Œ `Secret Access Key`ã€‚
3.  **è®¾ç½®ç¯å¢ƒå˜é‡**ï¼šå°†æ‚¨çš„ R2 å‡­è¯å’Œä¿¡æ¯å¡«å…¥ `.env` æ–‡ä»¶ã€‚
4.  **é…ç½® CORS ç­–ç•¥**ï¼šä¸ºäº†å…è®¸æµè§ˆå™¨ç›´æ¥ä¸Šä¼ æ–‡ä»¶ï¼Œéœ€è¦åœ¨æ‚¨çš„ R2 å­˜å‚¨æ¡¶çš„â€œè®¾ç½®â€ä¸­é…ç½® CORS ç­–ç•¥ã€‚æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œå¹¶å°† `AllowedOrigins` ä¸­çš„ URL æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„ï¼š

```json
[
  {
    "AllowedOrigins": ["http://localhost:3000", "https://yourdomain.com"],
    "AllowedMethods": ["PUT", "GET"],
    "AllowedHeaders": ["*"],
    "ExposeHeaders": ["ETag"],
    "MaxAgeSeconds": 3000
  }
]
```

### 2. ä½¿ç”¨ `FileUploader` ç»„ä»¶

æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„ `FileUploader` ç»„ä»¶ï¼Œæ”¯æŒæ‹–æ‹½ã€è¿›åº¦æ˜¾ç¤ºã€å›¾ç‰‡å‹ç¼©å’Œé”™è¯¯å¤„ç†ã€‚

#### åŸºæœ¬ç”¨æ³•

```tsx
import { FileUploader } from "@/components/ui/file-uploader";

function MyComponent() {
  const handleUploadComplete = (files) => {
    console.log("ä¸Šä¼ å®Œæˆ:", files);
    // åœ¨æ­¤å¤„ç†ä¸Šä¼ æˆåŠŸçš„æ–‡ä»¶ä¿¡æ¯
  };

  return (
    <FileUploader
      acceptedFileTypes={["image/png", "image/jpeg", "application/pdf"]}
      maxFileSize={5 * 1024 * 1024} // 5MB
      maxFiles={3}
      onUploadComplete={handleUploadComplete}
    />
  );
}
```

#### å›¾ç‰‡å‹ç¼©

ç»„ä»¶å†…ç½®äº†å®¢æˆ·ç«¯å›¾ç‰‡å‹ç¼©åŠŸèƒ½ï¼Œå¯åœ¨ä¸Šä¼ å‰å‡å°å›¾ç‰‡ä½“ç§¯ï¼ŒèŠ‚çœå¸¦å®½å’Œå­˜å‚¨ç©ºé—´ã€‚

```tsx
<FileUploader
  acceptedFileTypes={["image/png", "image/jpeg", "image/webp"]}
  enableImageCompression={true}
  imageCompressionQuality={0.7} // å‹ç¼©è´¨é‡ (0.1-1.0)
  imageCompressionMaxWidth={1200} // å‹ç¼©åæœ€å¤§å®½åº¦
/>
```

## ğŸ“Š åŒ…ä½“ç§¯ç›‘æ§ä¸ä¼˜åŒ–

æœ¬é¡¹ç›®é›†æˆäº† `@next/bundle-analyzer`ï¼Œå¸®åŠ©æ‚¨åˆ†æå’Œä¼˜åŒ–åº”ç”¨çš„åŒ…ä½“ç§¯ã€‚

### å¦‚ä½•è¿è¡Œåˆ†æ

```bash
# åˆ†æç”Ÿäº§æ„å»º
pnpm analyze

# åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿›è¡Œåˆ†æ
pnpm analyze:dev
```

æ‰§è¡Œåï¼Œä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åŒ…ä½“ç§¯åˆ†ææŠ¥å‘Šã€‚

### ä¼˜åŒ–ç­–ç•¥

- **åŠ¨æ€å¯¼å…¥**ï¼šå¯¹éé¦–å±å¿…éœ€çš„å¤§å‹ç»„ä»¶æˆ–åº“ä½¿ç”¨ `next/dynamic` è¿›è¡Œä»£ç åˆ†å‰²ã€‚
- **ä¾èµ–ä¼˜åŒ–**ï¼š
  - **Tree Shaking**: ç¡®ä¿åªä»åº“ä¸­å¯¼å…¥æ‚¨éœ€è¦çš„éƒ¨åˆ†ï¼Œä¾‹å¦‚ `import { debounce } from 'lodash-es';` è€Œä¸æ˜¯ `import _ from 'lodash';`ã€‚
  - **è½»é‡æ›¿ä»£**: è€ƒè™‘ä½¿ç”¨æ›´è½»é‡çš„åº“ï¼Œä¾‹å¦‚ç”¨ `date-fns` æ›¿ä»£ `moment.js`ã€‚
- **å›¾ç‰‡ä¼˜åŒ–**: ä¼˜å…ˆä½¿ç”¨ Next.js çš„ `<Image>` ç»„ä»¶ï¼Œå¹¶å¯ç”¨ WebP æ ¼å¼ã€‚

## â˜ï¸ éƒ¨ç½²

æ¨èä½¿ç”¨ [Vercel](https://vercel.com) è¿›è¡Œéƒ¨ç½²ï¼Œå› ä¸ºå®ƒä¸ Next.js æ— ç¼é›†æˆã€‚

1.  **æ¨é€åˆ° Git ä»“åº“:**
    å°†æ‚¨çš„ä»£ç æ¨é€åˆ° GitHubã€GitLab æˆ– Bitbucket ä»“åº“ã€‚

2.  **åœ¨ Vercel ä¸­å¯¼å…¥é¡¹ç›®:**

    - ç™»å½•æ‚¨çš„ Vercel è´¦æˆ·ï¼Œç‚¹å‡» "Add New... > Project"ï¼Œç„¶åé€‰æ‹©æ‚¨çš„ Git ä»“åº“ã€‚
    - Vercel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°è¿™æ˜¯ä¸€ä¸ª Next.js é¡¹ç›®å¹¶é…ç½®å¥½æ„å»ºè®¾ç½®ã€‚

3.  **é…ç½®ç¯å¢ƒå˜é‡:**

    - åœ¨ Vercel é¡¹ç›®çš„ "Settings" -> "Environment Variables" ä¸­ï¼Œæ·»åŠ æ‚¨åœ¨ `.env` æ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚**è¯·å‹¿å°† `.env` æ–‡ä»¶æäº¤åˆ° Git ä»“åº“ä¸­**ã€‚

4.  **é…ç½®ç”Ÿäº§æ•°æ®åº“è¿ç§»:**
    åœ¨éƒ¨ç½²æˆåŠŸåï¼Œå•ç‹¬æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼š`pnpm db:migrate:prod`

5.  **éƒ¨ç½²!**
    å®Œæˆä¸Šè¿°æ­¥éª¤åï¼ŒVercel ä¼šåœ¨æ‚¨æ¯æ¬¡æ¨é€åˆ°ä¸»åˆ†æ”¯æ—¶è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²æ‚¨çš„åº”ç”¨ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](https://github.com/ullrai/saas-starter/blob/main/LICENSE) è®¸å¯è¯ã€‚
